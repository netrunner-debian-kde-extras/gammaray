From: Jakub Adam <jakub.adam@ktknet.cz>
Date: Thu, 5 Jan 2012 00:57:49 +0100
Subject: probe-lib-location

Install gammaray_probe.so to /usr/lib/gammaray as it is application
private library. Fixes lintian warnings/errors:

package-name-doesnt-match-sonames
shlib-without-versioned-soname
postinst-must-call-ldconfig
---
 CMakeLists.txt          |    4 ++--
 config-gammaray.h.cmake |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 06bdc1c..143ee94 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -314,7 +314,7 @@ endif()
 
 qt4_add_resources(gammaray_srcs resources/gammaray.qrc)
 add_library(gammaray_probe
-  SHARED ${gammaray_srcs}
+  MODULE ${gammaray_srcs}
 )
 if(BUILD_TIMER_PLUGIN AND NOT WIN32)
   target_link_libraries(gammaray_probe rt)
@@ -328,7 +328,7 @@ if(NOT WIN32)
 endif()
 set_target_properties(gammaray_probe PROPERTIES PREFIX "")
 
-install(TARGETS gammaray_probe ${INSTALL_TARGETS_DEFAULT_ARGS})
+install(TARGETS gammaray_probe DESTINATION ${LIB_INSTALL_DIR}/gammaray)
 
 if(UNIX AND NOT APPLE)
   set(XDG_APPS_INSTALL_DIR share/applications)
diff --git a/config-gammaray.h.cmake b/config-gammaray.h.cmake
index e1a24d2..c6c8b89 100644
--- a/config-gammaray.h.cmake
+++ b/config-gammaray.h.cmake
@@ -1,4 +1,4 @@
-#define GAMMARAY_LIB_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}"
+#define GAMMARAY_LIB_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}/gammaray"
 #define GAMMARAY_PLUGIN_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/${PLUGIN_INSTALL_DIR}"
 // for finding the probe during automatic tests
 #define GAMMARAY_BUILD_DIR "${CMAKE_BINARY_DIR}"
-- 
